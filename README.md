# Maven Typings Plugin

Convert any [TypeScript Definition](https://github.com/dukescript/definitelytyped)
files into Java APIs that can be used everywhere thanks to
[DukeScript presenters](https://github.com/dukescript/dukescript-presenters).

Use the benefits of Java language (excellent tooling, strongly typed code,
refactorings, etc.) and combine them with the dynamics of JavaScript libraries.
Get the best of both worlds!

## How can I use the Plugin?

Find your typings file (you can choose any from more than 1500 available
in [DukeScript Definitely Typed](https://github.com/dukescript/definitelytyped) repository)
and add following into your `pom.xml` file:

```xml
<plugin>
    <groupId>com.dukescript.libraries</groupId>
    <artifactId>typings-maven-plugin</artifactId>
    <version>0.2</version> <!-- check for the latest! -->
    <executions>
        <execution>
            <id>generate-sources</id>
            <goals>
                <goal>generate</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <typings>path/to/your/typings.d.ts</typings>
        <package>package.to.store.the.files.in</package>
        <!-- optionally -->
        <imports>
            <!-- list other already generated packages you depend on -->
            <import>net.java.html.lib.dom</import>
        </imports>
        <!-- optionally -->
        <scripts>
            <!-- the JavaScript code of the library -->
            <script>path.to.library.js</script>
        </scripts>
    </configuration>
</plugin>
```

and that is it! The types and functions found in your typings file will
be converted into Java classes and you can use them in your own applications.

Alternatively you can contribute your typings *Java* conversions to everyone as described
at [DukeScript DefinitelyTyped README](https://github.com/dukescript/DefinitelyTyped/blob/master/README.md).

## Are There any Typings Ready?

Yes, the [DukeScript project](http://dukescript.com) has uploaded Java typings for
the most popular JavaScript libraries to Maven. Check 
the [central repository](http://search.maven.org/#search|ga|1|net.java.html.lib)
for current status. Visit the
[DukeScript DefinitelyTyped](https://github.com/dukescript/DefinitelyTyped/blob/master/README.md)
project for instructions how to use them.

## How Does it Work?

There is the [Generator class](https://github.com/dukescript/maven-typings-plugin/blob/master/mojo-base/src/main/java/com/dukescript/libraries/proc/Generator.java)
at the heart of the Maven typings plugin. It uses the JDK's scripting engine to start
TypeScript parser (converted to JavaScript) and parse the provided typings file.
Then it converts the result into Java
[AST classes](https://github.com/dukescript/maven-typings-plugin/blob/master/mojo-base/src/main/java/com/dukescript/libraries/proc/ASTCntrl.java)
generated by [@Model annotation](http://bits.netbeans.org/html+java/1.3/net/java/html/json/Model.html).
Then the generator visits the tree of AST nodes
and based on them generates appropriate Java source files.

The generated
code is using [@JavaScriptBody annotation](http://bits.netbeans.org/html+java/1.3/net/java/html/js/package-summary.html)
which is extremely portable - the generated libraries are known to run
in a JavaFX webview, in JDK's Nashorn, in a WebKit component, on Android, iOS
and even directly in a browser. Find more info in
[DukeScript presenters](https://github.com/dukescript/dukescript-presenters)
project.

Important part of the project is focus on quality. As such there are focused
tests testing [various constructs](https://github.com/dukescript/maven-typings-plugin/tree/master/mojo-test/src/main/resources/com/dukescript/libraries/ap/test/hello)
of the TypeScript language and whether they get properly
[converted into Java](https://github.com/dukescript/maven-typings-plugin/blob/master/mojo-test/src/test/java/com/dukescript/libraries/ap/test/hello/HelloTest.java).
The tests are executed with
[JUnit Browser Runner](https://github.com/dukescript/junit-browser-runner)
which is the most flexible way of running your tests in all supported
environments.

## License

The plugin is [GPLv3](https://github.com/dukescript/maven-typings-plugin/blob/master/LICENSE)
licensed. Contribute to the development of the plugin by forking it on GitHub!

You can use publicly available version of the Maven typings plugin to generate Java typings
from any TypeScript typings file and publish the result under any license.
For example the [DukeScript Definitely Typed](https://github.com/dukescript/DefinitelyTyped/blob/master/README.md)
libraries are [MIT licensed](https://github.com/dukescript/DefinitelyTyped/blob/master/LICENSE).
